(this["webpackJsonpinertia-website"]=this["webpackJsonpinertia-website"]||[]).push([[12],{481:function(e,t,a){},482:function(e,t,a){},483:function(e,t,a){},484:function(e,t,a){},490:function(e,t,a){"use strict";a.r(t);var n,c,s=a(5),r=a.n(s),i=a(250),l=a(58),o=a(4),j=a(1),u=a.n(j),d=a(22),b=a(103),x=a(225),O=a(256),p=a(19),h=a(114),k=a(336),m=a(224),f=a(247),v=a(226),S=a(223),g=a(95),_=a(227),y=a(506),w=a(330),T=a(329),N=(a(481),u.a.forwardRef((function(e,t){var a=e.action,n=e.placeholderText,c=e.balance,s=e.unit,r=e.loading,i=e.buttonText,u=Object(j.useState)(""),d=Object(l.a)(u,2),b=d[0],x=d[1];return Object(o.jsxs)("div",{className:"PoolInput",children:[Object(o.jsxs)("div",{className:"PoolInput__control",children:[Object(o.jsx)("input",{ref:t,className:"PoolInput__input",type:"text",value:b,placeholder:n,onChange:function(e){return x(e.target.value)}}),Object(o.jsx)("button",{className:"PoolInput__control__button",onClick:function(){void 0===c&&x("0"),void 0!==c&&x(Object(_.formatUnits)(c,s))},children:"Max"})]}),Object(o.jsx)("button",{className:r?"Btn Btn--primary PoolInput__action":"Btn Btn--secondary PoolInput__action",disabled:r,onClick:a,children:r?"Loading...":i})]})}))),I=(a(482),function(e){var t=e.label,a=e.value,n=e.token;return Object(o.jsxs)("div",{className:"WalletStat",children:[Object(o.jsx)("p",{className:"WalletStat__label",children:t}),Object(o.jsxs)("p",{className:"WalletStat__value",children:[a," ",Object(o.jsx)("span",{className:"WalletStat__token",children:n})]})]})}),C=function(e){var t=e.stakeView,a=e.tokenAddress,n=e.poolAddress,c=e.stakeToken,s=Object(j.useRef)(),u=Object(j.useRef)(),d=Object(h.c)(),b=d.account,O=d.library,p=Object(v.a)([a,"balanceOf",b],{fetcher:Object(S.a)(O,x.e)}),k=p.data,f=p.mutate,C=Object(v.a)([n,"balanceOf",b],{fetcher:Object(S.a)(O,x.e)}),B=C.data,U=C.mutate,A=Object(v.a)([n,"estimatedRewards"],{fetcher:Object(S.a)(O,x.e)}),P=A.data,R=A.mutate;Object(j.useEffect)((function(){return O.on("block",(function(){f(void 0,!0),U(void 0,!0),R(void 0,!0)})),function(){O.removeAllListeners("block")}}),[O,f,U,R]);var E=Object(j.useState)(!1),F=Object(l.a)(E,2),V=F[0],W=F[1],L=Object(j.useState)(!1),G=Object(l.a)(L,2),M=G[0],q=G[1],J=Object(j.useState)(!1),z=Object(l.a)(J,2),D=z[0],K=z[1],Q=Object(j.useState)(!1),Y=Object(l.a)(Q,2),Z=Y[0],H=Y[1];function X(){return(X=Object(i.a)(r.a.mark((function e(){var t,c,i,l,o,j,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),t=new g.a(a,x.b,O.getSigner()),c=new g.a(n,x.e,O.getSigner()),e.prev=3,i=s.current,l=i?Object(_.parseUnits)(i.value,18):0,e.next=8,t.allowance(b,n);case 8:if(!e.sent.lt(l)){e.next=15;break}return e.next=12,t.approve(n,l);case 12:return o=e.sent,e.next=15,o.wait(1);case 15:return e.next=17,c.stake(l);case 17:return o=e.sent,e.next=20,o.wait(1);case 20:return e.next=22,t.balanceOf(b);case 22:return j=e.sent,e.next=25,c.balanceOf(b);case 25:return u=e.sent,e.next=28,U(u);case 28:return e.next=30,f(j);case 30:y.b.success("Staking successfully executed"),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(3),y.b.error("Staking failed, please try again");case 36:W(!1);case 37:case"end":return e.stop()}}),e,null,[[3,33]])})))).apply(this,arguments)}function $(){return($=Object(i.a)(r.a.mark((function e(){var t,c,s,i,l,o,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),t=new g.a(a,x.b,O.getSigner()),c=new g.a(n,x.e,O.getSigner()),e.prev=3,s=u.current,i=s?Object(_.parseUnits)(s.value,18):0,e.next=8,c.unstake(i);case 8:return l=e.sent,e.next=11,l.wait(1);case 11:return e.next=13,t.balanceOf(b);case 13:return o=e.sent,e.next=16,c.balanceOf(b);case 16:return j=e.sent,e.next=19,f(o);case 19:return e.next=21,U(j);case 21:y.b.success("Unstake successfully executed"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(3),console.log(e.t0),y.b.error("Unstake failed, please try again");case 28:q(!1);case 29:case"end":return e.stop()}}),e,null,[[3,24]])})))).apply(this,arguments)}function ee(){return(ee=Object(i.a)(r.a.mark((function e(){var t,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),t=new g.a(n,x.e,O.getSigner()),e.prev=2,e.next=5,t.withdrawRewards();case 5:return a=e.sent,e.next=8,a.wait(1);case 8:return e.next=10,t.estimatedRewards(b);case 10:return c=e.sent,e.next=13,R(c);case 13:y.b.success("Claim reward successful"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),y.b.error("Claim reward failed, please try again");case 19:K(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function te(){return(te=Object(i.a)(r.a.mark((function e(){var t,c,s,i,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),t=new g.a(n,x.e,O.getSigner()),c=new g.a(a,x.b,O.getSigner()),e.prev=3,e.next=6,t.exit();case 6:return s=e.sent,e.next=9,s.wait(1);case 9:return e.next=11,c.balanceOf(b);case 11:return i=e.sent,e.next=14,t.balanceOf(b);case 14:return l=e.sent,e.next=17,t.estimatedRewards(b);case 17:return o=e.sent,e.next=20,U(l);case 20:return e.next=22,f(i);case 22:return e.next=24,R(o);case 24:y.b.success("Claim and unstake successfully executed"),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(3),console.log(e.t0),y.b.error("Claim and unstake failed, please try again");case 31:H(!1);case 32:case"end":return e.stop()}}),e,null,[[3,27]])})))).apply(this,arguments)}switch(t){case"a":return Object(o.jsxs)(w.a,{span:24,children:[Object(o.jsxs)(T.a,{gutter:[16,16],children:[Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Currently staked",value:Object(o.jsx)(m.a,{value:void 0!==B?Object(_.formatUnits)(B,18):0,displayType:"text",thousandSeparator:!0,decimalScale:6}),token:c})}),Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Wallet balance",value:Object(o.jsx)(m.a,{value:void 0!==k?Object(_.formatUnits)(k,18):0,displayType:"text",thousandSeparator:!0,decimalScale:6}),token:c})})]}),Object(o.jsx)(N,{action:function(){return X.apply(this,arguments)},loading:V,buttonText:"Stake",ref:s,balance:k,placeholderText:"Enter Amount",unit:18})]});case"b":return Object(o.jsxs)(w.a,{span:24,children:[Object(o.jsx)(T.a,{gutter:[16,16],children:Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Rewards available",value:Object(o.jsx)(m.a,{value:void 0!==P?Object(_.formatEther)(P):0,displayType:"text",thousandSeparator:!0,decimalScale:6}),token:c})})}),Object(o.jsx)(T.a,{gutter:[16,16],children:Object(o.jsx)(w.a,{span:24,children:Object(o.jsx)("button",{className:D?"Btn Btn--primary StakeView__action":"Btn Btn--secondary StakeView__action",onClick:function(){return!D&&function(){return ee.apply(this,arguments)}()},disabled:D,children:D?"Loading...":"Claim"})})})]});case"c":return Object(o.jsxs)(w.a,{span:24,children:[Object(o.jsx)(T.a,{gutter:[16,16],children:Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Currently staked",value:Object(o.jsx)(m.a,{value:void 0!==B?Object(_.formatUnits)(B,18):0,displayType:"text",thousandSeparator:!0,decimalScale:6}),token:c})})}),Object(o.jsx)(N,{action:function(){return $.apply(this,arguments)},loading:M,buttonText:"Unstake",ref:u,balance:B,placeholderText:"Unstake Amount",unit:18})]});case"d":return Object(o.jsxs)(w.a,{span:24,children:[Object(o.jsxs)(T.a,{gutter:[16,16],children:[Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Currently staked",value:Object(o.jsx)(m.a,{value:void 0!==B?Object(_.formatUnits)(B,18):0,displayType:"text",thousandSeparator:!0,decimalScale:8}),token:c})}),Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(I,{label:"Rewards available",value:Object(o.jsx)(m.a,{value:void 0!==P?Object(_.formatEther)(P):0,displayType:"text",thousandSeparator:!0,decimalScale:8}),token:c})})]}),Object(o.jsx)(T.a,{gutter:[16,16],children:Object(o.jsx)(w.a,{span:24,children:Object(o.jsx)("button",{className:Z?"Btn Btn--primary StakeView__action":"Btn Btn--secondary StakeView__action",onClick:function(){return!Z&&function(){return te.apply(this,arguments)}()},disabled:Z,children:Z?"Loading...":Object(o.jsx)(o.Fragment,{children:"Claim & Unstake"})})})})]});default:return null}},B=a(333),U=a(331),A=a(236),P=a(237),R=a(238),E=a(239),F=a(240);a(483);!function(e){e.Active="Active",e.Inactive="Inactive",e.Finished="Finished"}(n||(n={})),function(e){e.liquidity="liquidity tokens",e.token="tokens"}(c||(c={}));var V=function(e){switch(e){case"INR":return Object(o.jsx)(A.a,{className:"StakeItem__icon"});case"GP":return Object(o.jsx)(E.a,{className:"StakeItem__icon"});case"ES":return Object(o.jsx)(P.a,{className:"StakeItem__icon"});case"EI":return Object(o.jsx)(R.a,{className:"StakeItem__icon"});case"SP":return Object(o.jsx)(F.a,{className:"StakeItem__icon"});default:return Object(o.jsx)(A.a,{className:"StakeItem__icon"})}},W=function(e){var t=e.label,a=e.value;return Object(o.jsxs)("div",{className:"StakeStat",children:[Object(o.jsx)("p",{className:"StakeStat__label",children:t}),Object(o.jsx)("p",{className:"StakeStat__value",children:a})]})},L=function(e){var t=e.stake,a=e.receive,n=e.stakeTokenType;return Object(o.jsxs)("div",{className:"StakeInstruction",children:[Object(o.jsx)("p",{className:"StakeInstruction__title",children:"Instructions"}),Object(o.jsxs)("ul",{className:"StakeInstruction__steps",children:[Object(o.jsxs)("li",{children:["Deposit ",t," ",c[n]]}),Object(o.jsxs)("li",{children:["Receive a continuous drip of ",a]})]})]})},G=function(e){var t=e.provider,a=Object(d.g)().poolId,c=Object(j.useState)("a"),s=Object(l.a)(c,2),r=s[0],i=s[1],u=Object(j.useState)(null),b=Object(l.a)(u,2),v=b[0],S=b[1],g=Object(j.useState)(!0),_=Object(l.a)(g,2),y=_[0],N=_[1],I=new k.a({supportedChainIds:[1,3]}),A=Object(h.c)(),P=A.activate,R=A.active;return Object(j.useEffect)((function(){var e=f.find((function(e){return e.id===a}));e&&(S(e),N(!1))}),[a]),Object(o.jsx)("div",{className:"StakeItem",children:Object(o.jsxs)("div",{className:"StakeItem__container",children:[Object(o.jsx)(p.b,{to:"/lab/stake",className:"StakeItem__close",children:Object(o.jsx)(U.a,{})}),Object(o.jsx)("div",{className:"StakeItem__content",children:y?Object(o.jsx)("p",{children:"Loading..."}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(T.a,{gutter:[16,16],className:"StakeItem__top",children:[Object(o.jsxs)(w.a,{lg:{span:24},className:"StakeItem__title",children:[V(v.image),Object(o.jsx)("h3",{children:v.poolName})]}),Object(o.jsxs)(w.a,{lg:{span:24},className:"StakeItem__description",children:[Object(o.jsxs)("ul",{className:"StakeItem__list",children:[Object(o.jsxs)("li",{children:[Object(o.jsx)("span",{children:"Status"})," ",Object(o.jsx)("span",{children:n[v.status]})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("span",{children:"Start date"})," ",Object(o.jsx)(O.f,{contract:v.contract,provider:t,method:"startTime",type:"date"})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("span",{children:"Pool type"})," ",Object(o.jsx)("span",{children:v.type})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("span",{children:"Period"})," ",Object(o.jsx)(O.f,{contract:v.contract,provider:t,method:"periodDuration",type:"duration"})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("span",{children:"Next reward"})," ",Object(o.jsx)(O.f,{contract:v.contract,provider:t,method:"periodFinishTime",type:"distance"})]})]}),Object(o.jsx)("p",{children:v.description})]})]}),Object(o.jsxs)(T.a,{gutter:[16,16],children:[Object(o.jsx)(w.a,{lg:{span:24},children:Object(o.jsx)(L,{stake:"liquidity"===v.stakingToken.tokenType?Object(o.jsx)("a",{href:Object(x.f)(v.stakingToken.pairToken1,v.stakingToken.pairToken0),rel:"noreferrer",target:"_blank",children:v.stakingToken.name}):Object(o.jsx)(p.b,{to:"/lab/products/".concat(v.stakingToken.name),children:v.stakingToken.name}),receive:Object(o.jsx)(p.b,{to:"/lab/products/".concat(v.rewardToken.name),children:v.rewardToken.name}),stakeTokenType:v.stakingToken.tokenType})}),Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(W,{label:"Remaining",value:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a,{contract:v.rewardToken.contract,address:v.contract,provider:t,decimals:0}),"/",Object(o.jsx)(m.a,{value:v.reward.initial,displayType:"text",thousandSeparator:!0,decimalScale:0})]})})}),Object(o.jsx)(w.a,{lg:{span:12},children:Object(o.jsx)(W,{label:"Claimed",value:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.e,{contract:v.rewardToken.contract,address:v.contract,provider:t,decimals:0,subtract:v.reward.initial}),"/",Object(o.jsx)(m.a,{value:v.reward.initial,displayType:"text",thousandSeparator:!0,decimalScale:0})]})})})]}),Object(o.jsxs)(T.a,{gutter:[16,16],style:{marginTop:"1rem"},children:[Object(o.jsx)(w.a,{span:24,className:"StakeItem__radioContainer",children:Object(o.jsxs)(B.a.Group,{defaultValue:"a",size:"large",onChange:function(e){return i(e.target.value)},children:[Object(o.jsx)(B.a.Button,{value:"a",children:"Stake"}),Object(o.jsx)(B.a.Button,{value:"b",children:"Claim"}),Object(o.jsx)(B.a.Button,{value:"c",children:"Unstake"}),Object(o.jsx)(B.a.Button,{value:"d",children:"Claim & Unstake"})]})}),R?Object(o.jsx)(C,{stakeView:r,tokenAddress:v.stakingToken.contract,poolAddress:v.contract,stakeToken:v.stakingToken.name}):Object(o.jsx)(w.a,{span:24,children:Object(o.jsxs)("div",{className:"StakeItem__connect",children:[Object(o.jsx)("p",{children:"Please connect to MetaMask to interact with pool"}),Object(o.jsx)("button",{className:"Btn Btn--secondary",onClick:function(){return P(I)},children:"Connect to metamask"})]})})]})]})})]})})};a(484),t.default=function(e){var t=e.url,a=Object(j.useState)(null),n=Object(l.a)(a,2),c=n[0],s=n[1];return Object(j.useEffect)((function(){function e(){return(e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new b.a.providers.EtherscanProvider(x.d,"WSEBKEYQAFZ8AUGMFAKJR7GPCNYZ9Q3AIE"),s(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(o.jsxs)("div",{className:"Stake",children:[Object(o.jsx)(O.k,{provider:c,data:f,size:"large"}),Object(o.jsx)(d.a,{exact:!0,path:"".concat(t,"/stake/:poolId"),children:c&&Object(o.jsx)(G,{provider:c})})]})}}}]);
//# sourceMappingURL=12.8aa6f7c2.chunk.js.map